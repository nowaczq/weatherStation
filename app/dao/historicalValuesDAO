from sqlalchemy.orm import relationship
from init import db
from app.config.databaseConfig import base
from flask.ext.sqlalchemy import SQLAlchemy


class HistoricalValues(base):
    __tablename__ = 'historical_values'
    id = db.Column('id', db.INTEGER, primary_key = True)
    date = db.Column('date', db.TIMESTAMP, nullable = False)
    idCurrentVal = db.Column('id_current_val', db.INTEGER, db.ForeignKey('CurrentValues.id'))
    current = relationship("CurrentValues", back_populates = "history")

    def __init__(self,date):
        self.date = date

    def get_date(self):
        return self.date

    def to_json(self):
        return {'Historical values' : {'id' : self.id , 'date' : self.date, 'id_current_val' : self.idCurrentVal}}

    def __repr__(self):
        return '<Date %r>' % self.date